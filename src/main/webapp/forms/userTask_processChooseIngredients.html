<form name="customForm" role="form">

  <script cam-script type="text/form-script">
    camForm.on('form-loaded', function() {
      // fetch the variable named 'meal'
      camForm.variableManager.fetchVariable('mealForm');
    });

    camForm.on('variables-fetched', function() {
      // after the variables are fetched, bind the value of mealForm to a angular
      // scope value such that the form can work on it
      $scope.mealForm = camForm.variableManager.variable('mealForm').value;
    });

    camForm.on('submit', function() {
      // remove '$$hashKey' properties from meal objects
      angular.forEach($scope.mealForm.mealList, function(meal) {
        delete meal.$$hashKey;
      });
    });

  </script>

  <p class="lead">Please check your Ingredients</p>

  <div ng-repeat="ingredient in meal.ingredientList">

    <div ng-repeat="ingredient in meal.ingredientList">
      <div>
        {{ingredient.name}}<br>
        <div class="control-group">
          <label class="control-label" for="amount">How many?</label>

          <div class="controls">
            <input id="amount" class="form-control" required type="text" value="{{ingredient.amount}}" ng-model="ingredient.amount">
          </div>
        </div>

        <div class="control-group">
          <label class="control-label" for="hasIngredientsAtHome">Get this ingredients?</label>
          <div class="controls">
            <input id="hasIngredientsAtHome" type="checkbox" ng-model="ingredient.isAtHome">
          </div>
          <br>
        </div>
      </div>
      <br>
    </div>
  </div>

  <div class="form-group">
    <label>Loan Approved?</label> <select cam-variable-name="isApproved" cam-variable-type="Boolean">
      <option value="-1">please select one!</option>
      <option value="true">Continue with order</option>
      <option value="false">Cancel</option>
    </select>
  </div>

</form>